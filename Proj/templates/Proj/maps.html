{% extends "Proj/main.html" %}
{% block content %}
<!DOCTYPE html>
<html>
<head>

	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <style>
    .wrap {position: absolute;left: 0;bottom: 40px;width: 288px;height: 132px;margin-left: -144px;text-align: left;overflow: hidden;font-size: 12px;font-family: 'Malgun Gothic', dotum, '돋움', sans-serif;line-height: 1.5;}
    .wrap * {padding: 0;margin: 0;}
    .wrap .info {width: 286px;height: 120px;border-radius: 5px;border-bottom: 2px solid #ccc;border-right: 1px solid #ccc;overflow: hidden;background: #fff;}
    .wrap .info:nth-child(1) {border: 0;box-shadow: 0px 1px 2px #888;}
    .info .title {padding: 5px 0 0 10px;height: 30px;background: #eee;border-bottom: 1px solid #ddd;font-size: 18px;font-weight: bold;}
    .info .close {position: absolute;top: 10px;right: 10px;color: #888;width: 17px;height: 17px;background: url('http://t1.daumcdn.net/localimg/localimages/07/mapapidoc/overlay_close.png');}
    .info .close:hover {cursor: pointer;}
    .info .body {position: relative;overflow: hidden;}
    .info .desc {position: relative;margin: 13px 0 0 90px;height: 75px;}
    .desc .ellipsis {overflow: hidden;text-overflow: ellipsis;white-space: nowrap;}
    .desc .jibun {font-size: 11px;color: #888;margin-top: -2px;}
    .info .img {position: absolute;top: 6px;left: 5px;width: 73px;height: 71px;border: 1px solid #ddd;color: #888;overflow: hidden;}
    .info:after {content: '';position: absolute;margin-left: -12px;left: 50%;bottom: 0;width: 22px;height: 12px;background: url('http://t1.daumcdn.net/localimg/localimages/07/mapapidoc/vertex_white.png')}
    .info .link {color: #5085BB;}
    .box {font-size: 30px;}
    div#header{
        position:fixed;
        left:50%;
        top:10%;
    }
    div#map{
        position:relative;
        left:0%;
        top:0%;
    }
    div#dist{
        position:relative;
        background-color:#fff;
        left:50%;
        top:8%
    }
    .box {
    position:absolute;
    top:30%; left:85%;
    }
</style>
</head>
<body>
    <div id="map" style="width:80%;height:76%;"></div>

    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=644f44bd1b8094552e3c72b0a40edae8"></script>
    <script type="text/javascript">
        var name = "{{name}}";
    </script>
    
    <script>
		var container = document.getElementById('map');
		var options = {
			center: new kakao.maps.LatLng(36.969146,127.869253),
			level: 6
		};
        
		var map = new kakao.maps.Map(container, options); // 지도를 생성
        if (name == 'fox') {   
//팍스 마커
        // 지도에 마커를 표시합니다 
        var marker = new kakao.maps.Marker({
            map: map, 
            position: new kakao.maps.LatLng(36.974459, 127.872354)
        });
         
        // 커스텀 오버레이에 표시할 컨텐츠 입니다
        // 커스텀 오버레이는 아래와 같이 사용자가 자유롭게 컨텐츠를 구성하고 이벤트를 제어할 수 있기 때문에
        // 별도의 이벤트 메소드를 제공하지 않습니다 
        var content = '<div class="wrap">' + 
                    '    <div class="info">' + 
                    '        <div class="title">' + 
                    '            팍스 PC방' + 
                    '            <div class="close" onclick="closeOverlay()" title="닫기"></div>' + 
                    '        </div>' + 
                    '        <div class="body">' + 
                    '            <div class="img">' +
                    '                <img src="https://bit.ly/34jUb7p" width="73" height="70">' +
                    '           </div>' + 
                    '            <div class="desc">' + 
                    '                <div class="ellipsis">충청북도 충주시 하검단2길 67</div>' + 
                    '                <div class="jibun ellipsis">(우) 27469 (지번) 검단리 134-9</div>' + 
                    '                <div><a href = {% url "proj:fox" %}>상세정보</a></div>' + 
                    '            </div>' + 
                    '        </div>' + 
                    '    </div>' +    
                    '</div>';

        // 마커 위에 커스텀오버레이를 표시합니다
        // 마커를 중심으로 커스텀 오버레이를 표시하기위해 CSS를 이용해 위치를 설정했습니다
        var overlay = new kakao.maps.CustomOverlay({
            content: content,
            map: map,
            position: marker.getPosition()       
        });


        // 마커를 클릭했을 때 커스텀 오버레이를 표시합니다
        kakao.maps.event.addListener(marker, 'click', function() {
            overlay.setMap(map);
        });

        // 커스텀 오버레이를 닫기 위해 호출되는 함수입니다 
        function closeOverlay() {
            overlay.setMap(null);     
        }
        }
        else if (name == 'lime'){ 
//라임 마커
        // 지도에 마커를 표시합니다 
        var marker2 = new kakao.maps.Marker({
            map: map, 
            position: new kakao.maps.LatLng(36.96531700143226,127.87103704999606)
        });

        // 커스텀 오버레이에 표시할 컨텐츠 입니다
        // 커스텀 오버레이는 아래와 같이 사용자가 자유롭게 컨텐츠를 구성하고 이벤트를 제어할 수 있기 때문에
        // 별도의 이벤트 메소드를 제공하지 않습니다 
        var content2 = '<div class="wrap">' + 
                    '    <div class="info">' + 
                    '        <div class="title">' + 
                    '            라임 PC방' + 
                    '            <div class="close" onclick="closeOverlay2()" title="닫기"></div>' + 
                    '        </div>' + 
                    '        <div class="body">' + 
                    '            <div class="img">' +
                    '                <img src="/media/lime.jpg" width="73" height="70">' +
                    '           </div>' + 
                    '            <div class="desc">' + 
                    '                <div class="ellipsis">충청북도 충주시 요도천변길 212</div>' + 
                    '                <div class="jibun ellipsis">(우) 27469 (지번) 검단리 103-14</div>' + 
                    '                <div><a href = {% url "proj:lime" %}>상세정보</a></div>' + 
                    '            </div>' + 
                    '        </div>' + 
                    '    </div>' +    
                    '</div>';

        // 마커 위에 커스텀오버레이를 표시합니다
        // 마커를 중심으로 커스텀 오버레이를 표시하기위해 CSS를 이용해 위치를 설정했습니다
        var overlay2 = new kakao.maps.CustomOverlay({
            content: content2,
            map: map,
            position: marker2.getPosition()       
        });
        


        // 마커를 클릭했을 때 커스텀 오버레이를 표시합니다
        kakao.maps.event.addListener(marker2, 'click', function() {
            overlay2.setMap(map);
        });

        // 커스텀 오버레이를 닫기 위해 호출되는 함수입니다 
        function closeOverlay2() {
            overlay2.setMap(null);     
        }
        } else if (name == 'pop'){
//3pop 마커
        // 지도에 마커를 표시합니다 
        var marker3 = new kakao.maps.Marker({
            map: map, 
            position: new kakao.maps.LatLng(36.96525529236092, 127.87177184717017)
        });

        // 커스텀 오버레이에 표시할 컨텐츠 입니다
        // 커스텀 오버레이는 아래와 같이 사용자가 자유롭게 컨텐츠를 구성하고 이벤트를 제어할 수 있기 때문에
        // 별도의 이벤트 메소드를 제공하지 않습니다 
        var content3 = '<div class="wrap">' + 
                    '    <div class="info">' + 
                    '        <div class="title">' + 
                    '            3POP PC방' + 
                    '            <div class="close" onclick="closeOverlay3()" title="닫기"></div>' + 
                    '        </div>' + 
                    '        <div class="body">' + 
                    '            <div class="img">' +
                    '                <img src="https://bit.ly/2RinUbw" width="73" height="70">' +
                    '           </div>' + 
                    '            <div class="desc">' + 
                    '                <div class="ellipsis">충청북도 충주시 하검단2길 67</div>' + 
                    '                <div class="jibun ellipsis">(우) 27469 (지번) 검단리 134-9</div>' + 
                    '                <div><a href = {% url "proj:pop" %}>상세정보</a></div>' + 
                    '            </div>' + 
                    '        </div>' + 
                    '    </div>' +    
                    '</div>';

        // 마커 위에 커스텀오버레이를 표시합니다
        // 마커를 중심으로 커스텀 오버레이를 표시하기위해 CSS를 이용해 위치를 설정했습니다
        var overlay3 = new kakao.maps.CustomOverlay({
            content: content3,
            map: map,
            position: marker3.getPosition()       
        });



        // 마커를 클릭했을 때 커스텀 오버레이를 표시합니다
        kakao.maps.event.addListener(marker3, 'click', function() {
            overlay3.setMap(map);
        });

        // 커스텀 오버레이를 닫기 위해 호출되는 함수입니다 
        function closeOverlay3() {
            overlay3.setMap(null);     
        }
        } else if(name == 'ghostcastle'){
//고스트캐슬 마커
        // 지도에 마커를 표시합니다 
        var marker4 = new kakao.maps.Marker({
            map: map, 
            position: new kakao.maps.LatLng(36.96626801073573, 127.87404887820527)
        });

        // 커스텀 오버레이에 표시할 컨텐츠 입니다
        // 커스텀 오버레이는 아래와 같이 사용자가 자유롭게 컨텐츠를 구성하고 이벤트를 제어할 수 있기 때문에
        // 별도의 이벤트 메소드를 제공하지 않습니다 
        var content4 = '<div class="wrap">' + 
                    '    <div class="info">' + 
                    '        <div class="title">' + 
                    '            고스트캐슬 PC방' + 
                    '            <div class="close" onclick="closeOverlay4()" title="닫기"></div>' + 
                    '        </div>' + 
                    '        <div class="body">' + 
                    '            <div class="img">' +
                    '                <img src="https://bit.ly/3bVqoVd" width="73" height="70">' +
                    '           </div>' + 
                    '            <div class="desc">' + 
                    '                <div class="ellipsis">충청북도 충주시 요도천변길 212</div>' + 
                    '                <div class="jibun ellipsis">(우) 27469 (지번) 검단리 103-14</div>' + 
                    '                <div><a href = {% url "proj:ghostcastle" %}>상세정보</a></div>' + 
                    '            </div>' + 
                    '        </div>' + 
                    '    </div>' +    
                    '</div>';

        // 마커 위에 커스텀오버레이를 표시합니다
        // 마커를 중심으로 커스텀 오버레이를 표시하기위해 CSS를 이용해 위치를 설정했습니다
        var overlay4 = new kakao.maps.CustomOverlay({
            content: content4,
            map: map,
            position: marker4.getPosition()       
        });



        // 마커를 클릭했을 때 커스텀 오버레이를 표시합니다
        kakao.maps.event.addListener(marker4, 'click', function() {
            overlay4.setMap(map);
        });

        // 커스텀 오버레이를 닫기 위해 호출되는 함수입니다 
        function closeOverlay4() {
            overlay4.setMap(null);     
        }
        } else if(name == 'skybridge'){
//하늘다리 마커
        // 지도에 마커를 표시합니다 
        var marker5 = new kakao.maps.Marker({
            map: map, 
            position: new kakao.maps.LatLng(36.96523941580824, 127.87147971190117)
        });
        
        // 커스텀 오버레이에 표시할 컨텐츠 입니다
        // 커스텀 오버레이는 아래와 같이 사용자가 자유롭게 컨텐츠를 구성하고 이벤트를 제어할 수 있기 때문에
        // 별도의 이벤트 메소드를 제공하지 않습니다 
        var content5 = '<div class="wrap">' + 
                    '    <div class="info">' + 
                    '        <div class="title">' + 
                    '            하늘다리 PC방' + 
                    '            <div class="close" onclick="closeOverlay5()" title="닫기"></div>' + 
                    '        </div>' + 
                    '        <div class="body">' + 
                    '            <div class="img">' +
                    '                <img src="/media/skybridge.jpg" width="73" height="70">' +
                    '           </div>' + 
                    '            <div class="desc">' + 
                    '                <div class="ellipsis">충청북도 충주시 대학로 28</div>' + 
                    '                <div class="jibun ellipsis">(우) 27470 (지번) 검단리 79-2</div>' + 
                    '                <div><a href = {% url "proj:skybridge" %}>상세정보</a></div>' + 
                    '            </div>' + 
                    '        </div>' + 
                    '    </div>' +    
                    '</div>';

        // 마커 위에 커스텀오버레이를 표시합니다
        // 마커를 중심으로 커스텀 오버레이를 표시하기위해 CSS를 이용해 위치를 설정했습니다
        var overlay5 = new kakao.maps.CustomOverlay({
            content: content5,
            map: map,
            position: marker5.getPosition()       
        });



        // 마커를 클릭했을 때 커스텀 오버레이를 표시합니다
        kakao.maps.event.addListener(marker5, 'click', function() {
            overlay5.setMap(map);
        });

        // 커스텀 오버레이를 닫기 위해 호출되는 함수입니다 
        function closeOverlay5() {
            overlay5.setMap(null);     
        }
        } else if (name == 'ocelot'){
//오셀롯 마커
        // 지도에 마커를 표시합니다 
        var marker6 = new kakao.maps.Marker({
            map: map, 
            position: new kakao.maps.LatLng(36.964775615484484, 127.87144635271049)
        });
       
        // 커스텀 오버레이에 표시할 컨텐츠 입니다
        // 커스텀 오버레이는 아래와 같이 사용자가 자유롭게 컨텐츠를 구성하고 이벤트를 제어할 수 있기 때문에
        // 별도의 이벤트 메소드를 제공하지 않습니다 
        var content6 = '<div class="wrap">' + 
                    '    <div class="info">' + 
                    '        <div class="title">' + 
                    '            오셀롯 PC방' + 
                    '            <div class="close" onclick="closeOverlay6()" title="닫기"></div>' + 
                    '        </div>' + 
                    '        <div class="body">' + 
                    '            <div class="img">' +
                    '                <img src="https://bit.ly/3aPWWzT" width="73" height="70">' +
                    '           </div>' + 
                    '            <div class="desc">' + 
                    '                <div class="ellipsis">충청북도 충주시 대학로 24</div>' + 
                    '                <div class="jibun ellipsis">(우) 27470 (지번) 검단리 350-57</div>' + 
                    '                <div><a href = {% url "proj:ocelot" %}>상세정보</a></div>' + 
                    '            </div>' + 
                    '        </div>' + 
                    '    </div>' +    
                    '</div>';

        // 마커 위에 커스텀오버레이를 표시합니다
        // 마커를 중심으로 커스텀 오버레이를 표시하기위해 CSS를 이용해 위치를 설정했습니다
        var overlay6 = new kakao.maps.CustomOverlay({
            content: content6,
            map: map,
            position: marker6.getPosition()       
        });

        // 마커 초깃값 hidden설정
        // overlay6.setMap(null);  

        // 마커를 클릭했을 때 커스텀 오버레이를 표시합니다
        kakao.maps.event.addListener(marker6, 'click', function() {
            overlay6.setMap(map);
        });

        // 커스텀 오버레이를 닫기 위해 호출되는 함수입니다 
        function closeOverlay6() {
            overlay6.setMap(null);     
        }
        } else { alert("error")}
// HTML5의 geolocation으로 사용할 수 있는지 확인합니다 
if (navigator.geolocation) {
    // GeoLocation을 이용해서 접속 위치를 얻어옵니다
    navigator.geolocation.getCurrentPosition(function(position) {
        //startPos = position;

        var lat = position.coords.latitude, // 위도
            lon = position.coords.longitude; // 경도

        var locPosition = new kakao.maps.LatLng(lat, lon), // 마커가 표시될 위치를 geolocation으로 얻어온 좌표로 생성합니다
            message = '<div style="padding:5px;">현재 위치</div>'; // 인포윈도우에 표시될 내용입니다
        
        // 마커와 인포윈도우를 표시합니다
        displayMarker(locPosition, message);
            
      });
} else { // HTML5의 GeoLocation을 사용할 수 없을때 마커 표시 위치와 인포윈도우 내용을 설정합니다
    
        var locPosition = new kakao.maps.LatLng(33.450701, 126.570667),    
            message = 'geolocation을 사용할수 없어요..'

        displayMarker(locPosition, message);
    }
// 지도에 마커와 인포윈도우를 표시하는 함수입니다
function displayMarker(locPosition, message) {

    // 마커를 생성합니다
    var marker = new kakao.maps.Marker({  
        map: map, 
        position: locPosition
    }); 
    
    var iwContent = message, // 인포윈도우에 표시할 내용
        iwRemoveable = true;

    // 인포윈도우를 생성합니다
    var infowindow = new kakao.maps.InfoWindow({
        content : iwContent,
        removable : iwRemoveable
    });
    
    // 인포윈도우를 마커위에 표시합니다 
    infowindow.open(map, marker);
    
    // 지도 중심좌표를 접속위치로 변경합니다
    map.setCenter(locPosition);      
} 

</script>
<div class="box">
{% include 'Proj/distance.html' %}</div>
</body>
</html>
{% endblock %}